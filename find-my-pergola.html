<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시스템 파고라 맞춤형 자가 진단</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- EmailJS SDK (이메일 전송용) -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f3f4f6;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .option-card {
            transition: all 0.2s ease;
        }
        
        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Single Select Style */
        .option-card.selected {
            border-color: #1e3a8a; /* Blue-900 */
            background-color: #eff6ff; /* Blue-50 */
            ring: 2px solid #1e3a8a;
        }

        /* Multi Select Style (Checkbox effect) */
        .option-card.multi-selected {
            border-color: #2563eb; /* Blue-600 */
            background-color: #eff6ff;
            ring: 2px solid #2563eb;
        }
        
        .option-card.multi-selected .check-icon {
            display: block;
        }

        /* Loading Spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #1e3a8a;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Main Container -->
    <div class="bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden min-h-[600px] flex flex-col relative">
        
        <!-- Header / Progress Bar -->
        <div id="header-section" class="bg-slate-900 text-white p-6 sticky top-0 z-10">
            <div class="flex justify-between items-center mb-4">
                <div class="text-xl font-bold flex items-center gap-2">
                    <i class="fa-solid fa-umbrella-beach"></i>
                    <span>LUX PERGOLA</span>
                </div>
                <div class="text-sm opacity-80" id="step-indicator">Step 1/9</div>
            </div>
            <!-- Progress Bar -->
            <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden">
                <div id="progress-bar" class="bg-blue-500 h-full transition-all duration-300 ease-out" style="width: 10%"></div>
            </div>
        </div>

        <!-- Content Area -->
        <div class="flex-1 p-6 overflow-y-auto" id="content-area">
            
            <!-- Step 0: Intro -->
            <div id="step-intro" class="fade-in text-center h-full flex flex-col justify-center">
                <div class="mb-4">
                    <div class="w-full h-40 bg-blue-50 rounded-xl mb-5 flex items-center justify-center shadow-sm">
                        <i class="fa-solid fa-house-chimney-window text-6xl text-blue-400"></i>
                    </div>
                    
                    <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 text-xs font-bold rounded-full mb-3">초보자 맞춤 가이드</span>
                    
                    <h2 class="text-2xl font-bold text-slate-900 mb-4 leading-snug">
                        시스템 파고라 선택,<br>
                        <span class="text-blue-600">더 이상 고민하지 마세요!</span>
                    </h2>
                    
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-100 text-left space-y-3 mb-2">
                        <div class="flex items-start">
                            <i class="fa-solid fa-check text-blue-500 mt-1 mr-3"></i>
                            <p class="text-slate-600 text-sm leading-relaxed">
                                <strong>처음이라 막막하신가요?</strong><br>
                                시스템 파고라를 처음 접하는 고객님을 위해 쉽고 친절하게 만들었습니다.
                            </p>
                        </div>
                        <div class="flex items-start">
                            <i class="fa-solid fa-list-check text-blue-500 mt-1 mr-3"></i>
                            <p class="text-slate-600 text-sm leading-relaxed">
                                <strong>단계별 질문에 답해보세요.</strong><br>
                                복잡한 고민 없이, 질문을 따라가다 보면 나에게 딱 맞는 모델이 나옵니다.
                            </p>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-blue-100 shadow-sm mt-2">
                            <p class="text-slate-800 text-sm font-bold leading-relaxed text-center">
                                <i class="fa-solid fa-hand-holding-heart text-red-400 mr-1"></i>
                                "꼭 저희 제품이 아니더라도 괜찮습니다.<br>
                                전문가가 객관적으로 추천해 드리니,<br>
                                믿고 따라오세요!"
                            </p>
                        </div>
                    </div>
                </div>
                <button onclick="nextStep()" class="w-full bg-slate-900 text-white py-4 rounded-xl font-bold text-lg hover:bg-slate-800 transition shadow-lg transform active:scale-95">
                    내게 맞는 파고라 찾기 <i class="fa-solid fa-arrow-right ml-2"></i>
                </button>
            </div>

            <!-- Step 1: Region (Do/Si) -->
            <div id="step-region" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">설치하실 지역을 선택해주세요.</h3>
                <p class="text-sm text-slate-500 mb-4">가장 큰 행정구역(시/도)을 선택해주세요.</p>
                <div class="grid grid-cols-3 gap-2" id="region-grid">
                    <!-- Javascript will populate this -->
                </div>
            </div>

            <!-- Step 2: District (Si/Gun/Gu) -->
            <div id="step-district" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">세부 지역을 선택해주세요.</h3>
                <p class="text-sm text-slate-500 mb-4"><span id="selected-region-display" class="font-bold text-blue-600"></span>의 어느 곳인가요?</p>
                <div class="grid grid-cols-2 gap-2 max-h-96 overflow-y-auto pr-1" id="district-grid">
                    <!-- Javascript will populate this based on region selection -->
                </div>
            </div>

            <!-- Step 3: Customer Type -->
            <div id="step-customer-type" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">고객 유형을 알려주세요.</h3>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="selectOption('customerType', 'B2C (일반 소비자)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-yellow-100 p-3 rounded-full text-yellow-600"><i class="fa-solid fa-user"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">B to C : 일반 소비자예요!</div>
                            <div class="text-xs text-slate-500">가정에 설치할 제품을 찾고 있어요.</div>
                        </div>
                    </button>
                    <button onclick="selectOption('customerType', 'B2B (기업 소비자)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-indigo-100 p-3 rounded-full text-indigo-600"><i class="fa-solid fa-briefcase"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">B to B : 기업 소비자예요!</div>
                            <div class="text-xs text-slate-500">설계, 건설, 조경, 인테리어 등</div>
                        </div>
                    </button>
                    <button onclick="selectOption('customerType', 'B2G (관급 소비자)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-green-100 p-3 rounded-full text-green-600"><i class="fa-solid fa-building-columns"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">B to G : 관급 소비자예요!</div>
                            <div class="text-xs text-slate-500">관공서, 학교, 군시설 등</div>
                        </div>
                    </button>
                    <button onclick="selectOption('customerType', 'B2E (수출)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-blue-100 p-3 rounded-full text-blue-600"><i class="fa-solid fa-plane-departure"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">B to E : 수출 관련 소비자예요!</div>
                            <div class="text-xs text-slate-500">해외 수출 및 프로젝트</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Step 4: Budget -->
            <div id="step-budget" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">선호하는 제품 유형(예산)은?</h3>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="selectOption('budget', '최저가', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-gray-100 p-3 rounded-full text-gray-500"><i class="fa-solid fa-tag"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">가장 저렴한 파고라</div>
                            <div class="text-xs text-slate-500">품질 관계 없이 가격이 최우선이에요.</div>
                        </div>
                    </button>
                    <button onclick="selectOption('budget', '가성비', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-teal-100 p-3 rounded-full text-teal-600"><i class="fa-solid fa-shield-cat"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">안전 보장 가성비 제품</div>
                            <div class="text-xs text-slate-500">최소한의 안전은 보장되어야 해요.</div>
                        </div>
                    </button>
                    <button onclick="selectOption('budget', '디자인형', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-rose-100 p-3 rounded-full text-rose-600"><i class="fa-solid fa-paintbrush"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">디자인이 뛰어난 제품</div>
                            <div class="text-xs text-slate-500">공간의 품격을 높이는 스타일리시한 모델</div>
                        </div>
                    </button>
                    <button onclick="selectOption('budget', '고급형', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-purple-100 p-3 rounded-full text-purple-600"><i class="fa-solid fa-star"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">디자인 & 안전성 모두 높은 수준</div>
                            <div class="text-xs text-slate-500">품질과 디자인의 밸런스를 원해요!</div>
                        </div>
                    </button>
                    <button onclick="selectOption('budget', '최고급', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-yellow-100 p-3 rounded-full text-yellow-600"><i class="fa-solid fa-crown"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">가장 고급스러운 최고 수준</div>
                            <div class="text-xs text-slate-500">하이엔드 럭셔리 제품을 찾고 있어요!</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Step 5: Environment -->
            <div id="step-environment" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">설치 환경은 어디인가요?</h3>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="selectOption('environment', '전원주택 마당/정원', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-green-100 p-3 rounded-full text-green-600"><i class="fa-solid fa-tree"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">전원주택</div>
                            <div class="text-xs text-slate-500">마당, 정원, 데크 등</div>
                        </div>
                    </button>
                    <button onclick="selectOption('environment', '건물 루프탑/테라스', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-blue-100 p-3 rounded-full text-blue-600"><i class="fa-solid fa-building"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">루프탑 / 테라스</div>
                            <div class="text-xs text-slate-500">바람의 영향이 있는 고층</div>
                        </div>
                    </button>
                    <button onclick="selectOption('environment', '상업 공간(카페/식당)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-orange-100 p-3 rounded-full text-orange-600"><i class="fa-solid fa-mug-hot"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">상업 공간</div>
                            <div class="text-xs text-slate-500">카페, 식당, 호텔 등</div>
                        </div>
                    </button>
                    <button onclick="selectOption('environment', '공공시설물', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-slate-200 p-3 rounded-full text-slate-600"><i class="fa-solid fa-landmark"></i></div>
                        <div>
                            <div class="font-bold text-slate-800">공공시설물</div>
                            <div class="text-xs text-slate-500">공원, 학교, 관공서 쉼터 등</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Step 6: Purpose -->
            <div id="step-purpose" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">주로 어떤 용도로 사용하시나요?</h3>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="selectOption('purpose', '차양', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-gray-100 p-3 rounded-full text-gray-600"><i class="fa-solid fa-umbrella"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">간단한 차양과 우천 차단</div>
                            <div class="text-xs text-slate-500">기본적인 기능이면 충분해요!</div>
                        </div>
                    </button>
                    <button onclick="selectOption('purpose', '조경', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-purple-100 p-3 rounded-full text-purple-600"><i class="fa-solid fa-palette"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">디자인 및 조경 효과</div>
                            <div class="text-xs text-slate-500">아름다운 공간 연출을 원해요!</div>
                        </div>
                    </button>
                    <button onclick="selectOption('purpose', '휴식', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-pink-100 p-3 rounded-full text-pink-600"><i class="fa-solid fa-wine-glass"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">프라이빗 파티 및 휴식 공간</div>
                            <div class="text-xs text-slate-500">우리만의 특별한 휴식처를 원해요!</div>
                        </div>
                    </button>
                    <button onclick="selectOption('purpose', '자랑', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center gap-4">
                        <div class="bg-yellow-100 p-3 rounded-full text-yellow-600"><i class="fa-solid fa-gem"></i></div>
                        <div>
                            <div class="font-bold text-slate-800 text-sm">자랑스러운 최고의 공간</div>
                            <div class="text-xs text-slate-500">누구에게나 자랑할 수 있는 최고급 공간!</div>
                        </div>
                    </button>
                </div>
            </div>

            <!-- Step 7: Size -->
            <div id="step-size" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-4">예상하시는 사이즈는?</h3>
                <p class="text-sm text-slate-500 mb-4">대략적인 크기를 선택해주세요.</p>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="selectOption('size', '소형 (3x4m 이하)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-center flex flex-col items-center justify-center gap-2 h-32">
                        <i class="fa-solid fa-compress text-2xl text-slate-400"></i>
                        <span class="font-bold text-sm">소형<br>(3x4m 이하)</span>
                    </button>
                    <button onclick="selectOption('size', '중형 (3x4m ~ 4x6m)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-center flex flex-col items-center justify-center gap-2 h-32">
                        <i class="fa-solid fa-expand text-2xl text-slate-400"></i>
                        <span class="font-bold text-sm">중형<br>(3x4m ~ 4x6m)</span>
                    </button>
                    <button onclick="selectOption('size', '대형 (4x6m 이상 연동)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-center flex flex-col items-center justify-center gap-2 h-32">
                        <i class="fa-solid fa-maximize text-2xl text-slate-400"></i>
                        <span class="font-bold text-sm">대형<br>(4x6m 이상 연동)</span>
                    </button>
                    <button onclick="selectOption('size', '잘 모르겠음', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-center flex flex-col items-center justify-center gap-2 h-32">
                        <i class="fa-solid fa-question text-2xl text-slate-400"></i>
                        <span class="font-bold text-sm">잘 모르겠음<br>(상담 필요)</span>
                    </button>
                </div>
            </div>

            <!-- Step 8: Construction Scope -->
            <div id="step-scope" class="hidden fade-in">
                <h3 class="text-xl font-bold text-slate-800 mb-2">원하시는 공사 범위를 선택해주세요.</h3>
                <p class="text-sm text-slate-500 mb-4"><i class="fa-solid fa-check-double text-blue-500 mr-1"></i>중복 선택이 가능합니다.</p>
                <div class="grid grid-cols-1 gap-3">
                    <button onclick="toggleScope('시스템파고라', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center justify-between group">
                        <div class="flex items-center gap-4">
                            <div class="bg-indigo-100 p-3 rounded-full text-indigo-600"><i class="fa-solid fa-layer-group"></i></div>
                            <div>
                                <div class="font-bold text-slate-800">시스템 파고라</div>
                                <div class="text-xs text-slate-500">프레임 및 루버 본체 시공</div>
                            </div>
                        </div>
                        <i class="fa-solid fa-circle-check text-blue-600 text-xl hidden check-icon"></i>
                    </button>
                    
                    <button onclick="toggleScope('데크(바닥)', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center justify-between group">
                        <div class="flex items-center gap-4">
                            <div class="bg-amber-100 p-3 rounded-full text-amber-600"><i class="fa-solid fa-hammer"></i></div>
                            <div>
                                <div class="font-bold text-slate-800">데크 (바닥)</div>
                                <div class="text-xs text-slate-500">바닥 데크 및 기초 공사</div>
                            </div>
                        </div>
                        <i class="fa-solid fa-circle-check text-blue-600 text-xl hidden check-icon"></i>
                    </button>

                    <button onclick="toggleScope('글라스시스템', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center justify-between group">
                        <div class="flex items-center gap-4">
                            <div class="bg-cyan-100 p-3 rounded-full text-cyan-600"><i class="fa-solid fa-door-open"></i></div>
                            <div>
                                <div class="font-bold text-slate-800">글라스 시스템</div>
                                <div class="text-xs text-slate-500">폴딩도어 / 슬라이딩 도어</div>
                            </div>
                        </div>
                        <i class="fa-solid fa-circle-check text-blue-600 text-xl hidden check-icon"></i>
                    </button>

                    <button onclick="toggleScope('기타옵션', this)" class="option-card border-2 border-slate-100 p-4 rounded-xl text-left flex items-center justify-between group">
                        <div class="flex items-center gap-4">
                            <div class="bg-rose-100 p-3 rounded-full text-rose-600"><i class="fa-solid fa-sliders"></i></div>
                            <div>
                                <div class="font-bold text-slate-800">기타 옵션</div>
                                <div class="text-xs text-slate-500">간살, 스크린, 조명, 난방 등</div>
                            </div>
                        </div>
                        <i class="fa-solid fa-circle-check text-blue-600 text-xl hidden check-icon"></i>
                    </button>
                </div>
            </div>

            <!-- Step 9: Contact -->
            <div id="step-contact" class="hidden fade-in">
                <div class="text-center mb-6">
                    <i class="fa-solid fa-clipboard-check text-4xl text-blue-500 mb-2"></i>
                    <h3 class="text-xl font-bold text-slate-800">진단 결과 분석 완료!</h3>
                    <p class="text-sm text-slate-500">결과와 상세 견적을 받으실 연락처를 남겨주세요.</p>
                </div>
                
                <form id="leadForm" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">성함</label>
                        <input type="text" id="user_name" required class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-900 focus:outline-none" placeholder="홍길동">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">연락처</label>
                        <input type="tel" id="user_phone" required class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-900 focus:outline-none" placeholder="010-1234-5678">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">이메일 (선택)</label>
                        <input type="email" id="user_email" class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-900 focus:outline-none" placeholder="email@example.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">기타 문의사항</label>
                        <textarea id="user_message" rows="2" class="w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-slate-900 focus:outline-none" placeholder="추가적으로 궁금한 점이 있으시다면 적어주세요."></textarea>
                    </div>

                    <div class="flex items-start gap-2 pt-2">
                        <input type="checkbox" id="privacy" required class="mt-1">
                        <label for="privacy" class="text-xs text-slate-500">개인정보 수집 및 이용에 동의합니다. (상담 목적으로만 활용됩니다.)</label>
                    </div>
                </form>
            </div>

            <!-- Result Loading Screen -->
            <div id="loading-screen" class="hidden flex-col items-center justify-center h-full fade-in">
                <div class="loader mb-4"></div>
                <p class="text-slate-600 font-medium">고객님께 딱 맞는 모델을 찾고 있습니다...</p>
                <p class="text-xs text-slate-400 mt-2">서버로 데이터를 전송 중입니다.</p>
            </div>

            <!-- Final Result -->
            <div id="step-result" class="hidden fade-in pb-10">
                <div class="bg-green-50 text-green-800 px-4 py-2 rounded-lg text-sm font-bold text-center mb-6">
                    <i class="fa-solid fa-check-circle mr-1"></i> 진단이 완료되었습니다!
                </div>

                <!-- Persona Card -->
                <div class="bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-6 text-center text-white shadow-xl mb-6 relative overflow-hidden">
                    <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                    <div class="relative z-10">
                        <div class="inline-block p-3 rounded-full bg-white/10 mb-3 backdrop-blur-sm">
                            <i id="persona-icon" class="fa-solid fa-user-astronaut text-4xl text-yellow-400"></i>
                        </div>
                        <h2 class="text-lg font-light opacity-80 mb-1">당신의 유형은</h2>
                        <h1 id="persona-title" class="text-2xl font-bold text-white mb-2 leading-tight">존경받는 리더의 품격</h1>
                        <p id="persona-desc" class="text-sm text-slate-300 px-2 break-keep">금액을 떠나서 자신의 지위와 명예에 걸맞은 최고의 가치를 추구합니다.</p>
                    </div>
                </div>

                <h3 class="text-xl font-bold text-slate-900 mb-2 text-center">추천 모델: <span class="text-blue-600" id="result-model-name">PRO-LOUVER A</span></h3>
                <p class="text-center text-slate-500 text-sm mb-6">고객님께 가장 최적화된 솔루션입니다.</p>

                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden mb-6">
                    <div class="w-full h-40 bg-slate-50 flex items-center justify-center border-b border-slate-100">
                        <i id="result-icon" class="fa-solid fa-umbrella-beach text-7xl text-blue-300"></i>
                    </div>
                    
                    <div class="p-4">
                        <h4 class="font-bold text-lg mb-2">모델 특징 및 추천 이유</h4>
                        <ul class="text-sm text-slate-600 space-y-2" id="result-features">
                            <!-- Dynamic Content -->
                        </ul>
                    </div>
                </div>

                <div class="bg-slate-50 p-4 rounded-xl text-sm text-slate-700 mb-6 space-y-2">
                     <div class="flex justify-between border-b border-slate-200 pb-2 mb-2">
                        <span class="font-bold text-slate-900">선택 요약</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="font-bold">설치 지역:</span>
                        <span id="summary-address" class="text-right"></span>
                    </div>
                    <div class="flex justify-between">
                        <span class="font-bold">설치 환경:</span>
                        <span id="summary-environment" class="text-right"></span>
                    </div>
                    <div class="flex justify-between">
                        <span class="font-bold">예산 성향:</span>
                        <span id="summary-budget" class="text-right"></span>
                    </div>
                    <div class="flex justify-between">
                        <span class="font-bold">사용 용도:</span>
                        <span id="summary-purpose" class="text-right"></span>
                    </div>
                     <div class="flex justify-between">
                        <span class="font-bold">예상 사이즈:</span>
                        <span id="summary-size" class="text-right"></span>
                    </div>
                    <div class="flex justify-between pt-2 border-t border-slate-200 mt-2">
                        <span class="font-bold">공사 범위:</span>
                        <span id="summary-scope" class="text-right text-blue-600 font-bold"></span>
                    </div>
                </div>

                <div class="text-center space-y-3">
                    <p class="text-xs text-slate-400">전문 상담원이 입력하신 번호로 곧 연락드리겠습니다.</p>
                    <a href="tel:010-0000-0000" class="block w-full bg-slate-900 text-white py-3 rounded-lg font-bold shadow-md hover:bg-slate-800">
                        <i class="fa-solid fa-phone mr-2"></i> 지금 바로 전화 상담하기
                    </a>
                    <button onclick="location.reload()" class="block w-full bg-white text-slate-700 border border-slate-300 py-3 rounded-lg font-bold hover:bg-slate-50">
                        처음으로 돌아가기
                    </button>
                </div>
            </div>

        </div>

        <!-- Navigation Buttons -->
        <div id="footer-nav" class="p-4 border-t border-slate-100 bg-white hidden">
            <div class="flex justify-between gap-3">
                <button onclick="prevStep()" class="flex-1 py-3 px-4 rounded-lg border border-slate-300 text-slate-600 font-bold hover:bg-slate-50">
                    이전
                </button>
                <button id="next-btn" onclick="nextStep()" class="flex-[2] py-3 px-4 rounded-lg bg-slate-900 text-white font-bold hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed">
                    다음
                </button>
                <button id="submit-btn" onclick="submitForm()" class="hidden flex-[2] py-3 px-4 rounded-lg bg-blue-600 text-white font-bold hover:bg-blue-700 shadow-lg shadow-blue-200">
                    결과 보기
                </button>
            </div>
        </div>

    </div>

    <script>
        // --- Data: Korean Administrative Divisions ---
        const areaData = {
            '서울': ['강남구', '강동구', '강북구', '강서구', '관악구', '광진구', '구로구', '금천구', '노원구', '도봉구', '동대문구', '동작구', '마포구', '서대문구', '서초구', '성동구', '성북구', '송파구', '양천구', '영등포구', '용산구', '은평구', '종로구', '중구', '중랑구'],
            '경기': ['수원시', '성남시', '의정부시', '안양시', '부천시', '광명시', '평택시', '동두천시', '안산시', '고양시', '과천시', '구리시', '남양주시', '오산시', '시흥시', '군포시', '의왕시', '하남시', '용인시', '파주시', '이천시', '안성시', '김포시', '화성시', '광주시', '양주시', '포천시', '여주시', '연천군', '가평군', '양평군'],
            '인천': ['계양구', '남동구', '동구', '미추홀구', '부평구', '서구', '연수구', '중구', '강화군', '옹진군'],
            '강원': ['춘천시', '원주시', '강릉시', '동해시', '태백시', '속초시', '삼척시', '홍천군', '횡성군', '영월군', '평창군', '정선군', '철원군', '화천군', '양구군', '인제군', '고성군', '양양군'],
            '충북': ['청주시', '충주시', '제천시', '보은군', '옥천군', '영동군', '증평군', '진천군', '괴산군', '음성군', '단양군'],
            '충남': ['천안시', '공주시', '보령시', '아산시', '서산시', '논산시', '계룡시', '당진시', '금산군', '부여군', '서천군', '청양군', '홍성군', '예산군', '태안군'],
            '대전': ['대덕구', '동구', '서구', '유성구', '중구'],
            '경북': ['포항시', '경주시', '김천시', '안동시', '구미시', '영주시', '영천시', '상주시', '문경시', '경산시', '군위군', '의성군', '청송군', '영양군', '영덕군', '청도군', '고령군', '성주군', '칠곡군', '예천군', '봉화군', '울진군', '울릉군'],
            '경남': ['창원시', '진주시', '통영시', '사천시', '김해시', '밀양시', '거제시', '양산시', '의령군', '함안군', '창녕군', '고성군', '남해군', '하동군', '산청군', '함양군', '거창군', '합천군'],
            '대구': ['남구', '달서구', '동구', '북구', '서구', '수성구', '중구', '달성군'],
            '부산': ['강서구', '금정구', '남구', '동구', '동래구', '부산진구', '북구', '사상구', '사하구', '서구', '수영구', '연제구', '영도구', '중구', '해운대구', '기장군'],
            '울산': ['남구', '동구', '북구', '중구', '울주군'],
            '광주': ['광산구', '남구', '동구', '북구', '서구'],
            '전북': ['전주시', '군산시', '익산시', '정읍시', '남원시', '김제시', '완주군', '진안군', '무주군', '장수군', '임실군', '순창군', '고창군', '부안군'],
            '전남': ['목포시', '여수시', '순천시', '나주시', '광양시', '담양군', '곡성군', '구례군', '고흥군', '보성군', '화순군', '장흥군', '강진군', '해남군', '영암군', '무안군', '함평군', '영광군', '장성군', '완도군', '진도군', '신안군'],
            '제주': ['제주시', '서귀포시'],
            '세종': ['세종특별자치시']
        };

        // --- Configuration ---
        const EMAILJS_PUBLIC_KEY = "YOUR_PUBLIC_KEY"; 
        const EMAILJS_SERVICE_ID = "YOUR_SERVICE_ID";
        const EMAILJS_TEMPLATE_ID = "YOUR_TEMPLATE_ID";

        // --- State Management ---
        let currentStep = 0;
        const totalSteps = 10; 
        
        let answers = {
            region: '',
            district: '',
            customerType: '',
            budget: '',
            environment: '', 
            purpose: '',
            size: '',
            scope: [],
            name: '',
            phone: '',
            email: '',
            message: ''
        };

        // --- Initialization ---
        function init() {
            renderRegions();
            updateUI();
        }

        function renderRegions() {
            const container = document.getElementById('region-grid');
            container.innerHTML = '';
            for (const region in areaData) {
                const btn = document.createElement('button');
                btn.className = "option-card border-2 border-slate-100 p-3 rounded-xl text-center font-bold text-slate-700 hover:bg-blue-50 focus:outline-none";
                btn.innerText = region;
                btn.onclick = () => selectRegion(region, btn);
                container.appendChild(btn);
            }
        }

        function renderDistricts(region) {
            const container = document.getElementById('district-grid');
            container.innerHTML = '';
            const districts = areaData[region] || [];
            
            districts.forEach(district => {
                const btn = document.createElement('button');
                btn.className = "option-card border-2 border-slate-100 p-3 rounded-xl text-center text-sm font-medium text-slate-700 hover:bg-blue-50 focus:outline-none";
                btn.innerText = district;
                btn.onclick = () => selectOption('district', district, btn);
                container.appendChild(btn);
            });
        }

        // --- Navigation Logic ---
        function updateUI() {
            const steps = [
                'step-intro', 'step-region', 'step-district', 'step-customer-type',
                'step-budget', 'step-environment', 'step-purpose', 'step-size', 
                'step-scope', 'step-contact', 'step-result'
            ];
            
            steps.forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('footer-nav').classList.add('hidden');
            document.getElementById('header-section').classList.remove('hidden');

            document.getElementById(steps[currentStep]).classList.remove('hidden');

            if (currentStep > 0 && currentStep < 10) {
                 document.getElementById('footer-nav').classList.remove('hidden');
            } else if (currentStep === 10) {
                document.getElementById('header-section').classList.add('hidden');
            }

            let progress = 0;
            if (currentStep > 0 && currentStep < 10) {
                progress = (currentStep / 9) * 100;
                document.getElementById('step-indicator').innerText = `Step ${currentStep}/9`;
            } else if (currentStep === 0) {
                 document.getElementById('step-indicator').innerText = "";
            }
            document.getElementById('progress-bar').style.width = `${progress}%`;

            const nextBtn = document.getElementById('next-btn');
            const submitBtn = document.getElementById('submit-btn');

            if (currentStep === 9) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
            validateStep();
        }

        function nextStep() {
            if (currentStep < 10) {
                currentStep++;
                updateUI();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateUI();
            }
        }

        function selectRegion(value, element) {
            answers.region = value;
            answers.district = '';
            const parent = element.parentElement;
            Array.from(parent.children).forEach(child => child.classList.remove('selected'));
            element.classList.add('selected');
            document.getElementById('selected-region-display').innerText = value;
            renderDistricts(value);
            setTimeout(() => nextStep(), 300);
        }

        function selectOption(category, value, element) {
            answers[category] = value;
            const parent = element.parentElement;
            const options = parent.getElementsByClassName('option-card');
            for(let opt of options) {
                opt.classList.remove('selected');
            }
            element.classList.add('selected');
            setTimeout(() => nextStep(), 300);
        }

        function toggleScope(value, element) {
            const index = answers.scope.indexOf(value);
            if (index === -1) {
                answers.scope.push(value);
                element.classList.add('multi-selected');
            } else {
                answers.scope.splice(index, 1);
                element.classList.remove('multi-selected');
            }
            validateStep();
        }

        function validateStep() {
            const nextBtn = document.getElementById('next-btn');
            let isValid = false;
            if (currentStep === 1) isValid = !!answers.region;
            if (currentStep === 2) isValid = !!answers.district;
            if (currentStep === 3) isValid = !!answers.customerType;
            if (currentStep === 4) isValid = !!answers.budget;
            if (currentStep === 5) isValid = !!answers.environment;
            if (currentStep === 6) isValid = !!answers.purpose;
            if (currentStep === 7) isValid = !!answers.size;
            if (currentStep === 8) isValid = answers.scope.length > 0;
            if (currentStep > 0 && currentStep < 9) {
                nextBtn.disabled = !isValid;
                if(isValid) nextBtn.classList.remove('opacity-50', 'cursor-not-allowed');
                else nextBtn.classList.add('opacity-50', 'cursor-not-allowed');
            }
        }

        // --- 20 Personas Recommendation Logic ---
        function getRecommendation() {
            // Default Values
            let result = {
                title: "알 수 없는 유형",
                desc: "상담을 통해 정확한 타입을 확인해보세요.",
                modelName: "STANDARD AIR",
                features: "<li>기본형 모델 추천</li>",
                iconClass: "fa-solid fa-user",
                personaIcon: "fa-solid fa-user"
            };

            const budget = answers.budget;
            const purpose = answers.purpose;

            // 1. 최저가
            if (budget === '최저가') {
                if (purpose === '차양') {
                    result = {
                        title: "단순 그늘막형",
                        desc: "복잡한 기능보다는 비를 피할 수 있는 실용적인 공간을 원하시는군요.",
                        modelName: "BASIC SHADE (Manual)",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>가장 경제적인 수동 루버 시스템</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>기본 방수 기능 충실</li>",
                        iconClass: "fa-solid fa-tents text-green-500",
                        personaIcon: "fa-solid fa-hat-cowboy text-amber-600"
                    };
                } else if (purpose === '조경') {
                    result = {
                        title: "알뜰 꾸미기족",
                        desc: "저렴한 비용으로 마당의 구색을 갖추고 예쁘게 꾸미고 싶어 하시는군요.",
                        modelName: "DECO LITE",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>옵션을 최소화한 심플 디자인</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>가성비 좋은 조경 효과</li>",
                        iconClass: "fa-solid fa-leaf text-green-500",
                        personaIcon: "fa-solid fa-seedling text-green-600"
                    };
                } else if (purpose === '휴식') {
                    result = {
                        title: "소확행 쉼터족",
                        desc: "큰돈 들이지 않고 가족끼리 고기 구워 먹을 작은 공간이 필요하시군요.",
                        modelName: "FAMILY MINI (3x3)",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>3x3m 규격화된 소형 특가 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>바베큐 공간 최적화</li>",
                        iconClass: "fa-solid fa-utensils text-orange-400",
                        personaIcon: "fa-solid fa-campground text-orange-500"
                    };
                } else if (purpose === '자랑') {
                    result = {
                        title: "가성비 과시형",
                        desc: "합리적인 예산으로 남들에게 비싸 보이는 효과를 원하시는군요.",
                        modelName: "VOLUME LOOK",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>외관 볼륨감을 강조한 기성 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>가성비 최고의 시각적 효과</li>",
                        iconClass: "fa-solid fa-eye text-purple-500",
                        personaIcon: "fa-solid fa-glasses text-purple-600"
                    };
                }
            }
            // 2. 가성비
            else if (budget === '가성비') {
                if (purpose === '차양') {
                    result = {
                        title: "스마트 기능주의자",
                        desc: "태풍에 안전한지, A/S는 되는지 꼼꼼히 따지는 현명한 소비자시군요.",
                        modelName: "STANDARD AIR",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>검증된 내구성과 표준 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>잔고장 없는 튼튼한 설계</li>",
                        iconClass: "fa-solid fa-screwdriver-wrench text-slate-500",
                        personaIcon: "fa-solid fa-clipboard-check text-slate-600"
                    };
                } else if (purpose === '조경') {
                    result = {
                        title: "실용적 조경가",
                        desc: "정원과 어울리면서도 관리가 편하고 튼튼한 제품을 찾으시는군요.",
                        modelName: "LANDSCAPE PRO",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>녹슬지 않는 고품질 분체도장</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>조경과 조화로운 색상 선택 가능</li>",
                        iconClass: "fa-solid fa-tree text-green-600",
                        personaIcon: "fa-solid fa-trowel text-green-700"
                    };
                } else if (purpose === '휴식') {
                    result = {
                        title: "패밀리 세이프티족",
                        desc: "아이들이 뛰어놀거나 부모님이 쉬실 곳이라 안전을 최우선으로 생각하시는군요.",
                        modelName: "FAMILY SAFE",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>구조적 안정성이 검증된 프레임</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>야간 안전을 위한 LED 조명 기본</li>",
                        iconClass: "fa-solid fa-shield-heart text-red-400",
                        personaIcon: "fa-solid fa-user-shield text-blue-500"
                    };
                } else if (purpose === '자랑') {
                    result = {
                        title: "알뜰 뽐내기족",
                        desc: "남들이 '잘 샀다'고 칭찬할 만한 가성비 베스트셀러를 찾으시는군요.",
                        modelName: "BEST SELLER 2024",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>가장 많이 팔리는 인기 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>검증된 디자인과 성능</li>",
                        iconClass: "fa-solid fa-thumbs-up text-blue-500",
                        personaIcon: "fa-solid fa-award text-yellow-500"
                    };
                }
            }
            // 3. 디자인형
            else if (budget === '디자인형') {
                if (purpose === '차양') {
                    result = {
                        title: "스타일리시 쉐이드",
                        desc: "단순한 그늘막 하나를 쳐도 엣지 있고 세련된 디자인을 원하시는군요.",
                        modelName: "SLIM FIT DESIGN",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>슬림하고 모던한 프레임 라인</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>다양한 프레임 컬러 커스텀</li>",
                        iconClass: "fa-solid fa-palette text-pink-500",
                        personaIcon: "fa-solid fa-wand-magic-sparkles text-pink-600"
                    };
                } else if (purpose === '조경') {
                    result = {
                        title: "정원 예술가",
                        desc: "파고라를 단순 시설물이 아닌 정원의 조형 작품으로 생각하시는군요.",
                        modelName: "ART FRAME",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>간살(루버 월) 및 디자인 폴딩도어</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>심미적 완성도가 높은 마감</li>",
                        iconClass: "fa-solid fa-landmark text-amber-600",
                        personaIcon: "fa-solid fa-paintbrush text-amber-700"
                    };
                } else if (purpose === '휴식') {
                    result = {
                        title: "감성 캠핑족",
                        desc: "집 마당을 인스타 핫플 카페나 글램핑장처럼 감성적으로 꾸미고 싶어 하시는군요.",
                        modelName: "MOOD CAMP",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>감성적인 라인 조명 및 스팟 조명</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>파티션 및 커튼 옵션 적용</li>",
                        iconClass: "fa-solid fa-guitar text-orange-500",
                        personaIcon: "fa-solid fa-fire text-red-500"
                    };
                } else if (purpose === '자랑') {
                    result = {
                        title: "유니크 컬렉터",
                        desc: "흔한 디자인은 질색! 남들과 다른 독특한 형태나 색상을 원하시는군요.",
                        modelName: "UNIQUE CUSTOM",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>비대칭 디자인 또는 특수 도장</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>희소성 있는 디자인 포인트</li>",
                        iconClass: "fa-solid fa-fingerprint text-slate-700",
                        personaIcon: "fa-solid fa-gem text-purple-600"
                    };
                }
            }
            // 4. 고급형
            else if (budget === '고급형') {
                if (purpose === '차양') {
                    result = {
                        title: "프리미엄 프로텍터",
                        desc: "완벽한 방수와 차양, 그리고 무엇보다 압도적인 내구성을 원하시는군요.",
                        modelName: "HEAVY DUTY PRO",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>강풍을 견디는 고강도 프레임</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>고성능 모터와 완벽 방수 시스템</li>",
                        iconClass: "fa-solid fa-shield-halved text-slate-800",
                        personaIcon: "fa-solid fa-user-secret text-slate-900"
                    };
                } else if (purpose === '조경') {
                    result = {
                        title: "저택의 품격",
                        desc: "집의 가치를 올려줄 건축적 완성도가 높은 프리미엄 파고라를 찾으시는군요.",
                        modelName: "ARCHI FIT",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>건축물과 일체감 있는 설계</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>고급 자재를 사용한 프리미엄 마감</li>",
                        iconClass: "fa-solid fa-hotel text-indigo-600",
                        personaIcon: "fa-solid fa-user-tie text-indigo-800"
                    };
                } else if (purpose === '휴식') {
                    result = {
                        title: "럭셔리 라운지",
                        desc: "호텔 라운지 같은 편안함을 위해 냉난방 등 편의사양 풀옵션을 원하시는군요.",
                        modelName: "LOUNGE SUITE",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>전동 스크린 및 글라스 도어</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>실링팬, 히터 등 쾌적 옵션 포함</li>",
                        iconClass: "fa-solid fa-couch text-amber-800",
                        personaIcon: "fa-solid fa-martini-glass-citrus text-pink-500"
                    };
                } else if (purpose === '자랑') {
                    result = {
                        title: "웰메이드 프라이드",
                        desc: "이름 있는 브랜드 제품으로 시공하여 하차감과 자부심을 느끼고 싶어 하시는군요.",
                        modelName: "SIGNATURE LINE",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>브랜드 로고 각인 시그니처 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>최상의 브랜드 A/S 서비스</li>",
                        iconClass: "fa-solid fa-certificate text-yellow-600",
                        personaIcon: "fa-solid fa-crown text-yellow-500"
                    };
                }
            }
            // 5. 최고급
            else if (budget === '최고급') {
                if (purpose === '차양') {
                    result = {
                        title: "하이엔드 완벽주의자",
                        desc: "단 한 방울의 비도 용납 못 하며, 모든 것이 자동으로 제어되어야 직성이 풀리시는군요.",
                        modelName: "AI CONTROL SYSTEM",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>우적 센서 및 IoT 자동 제어</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>스마트홈 연동 최상위 모델</li>",
                        iconClass: "fa-solid fa-robot text-cyan-600",
                        personaIcon: "fa-solid fa-microchip text-cyan-700"
                    };
                } else if (purpose === '조경') {
                    result = {
                        title: "랜드마크 메이커",
                        desc: "우리 집이나 가게가 지역의 명소가 될 수 있도록 압도적인 스케일을 원하시는군요.",
                        modelName: "SKY AWNING MAX",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>초대형 특수 제작 파고라</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>개방감이 극대화된 스카이 어닝</li>",
                        iconClass: "fa-solid fa-building text-slate-800",
                        personaIcon: "fa-solid fa-map-location-dot text-red-600"
                    };
                } else if (purpose === '휴식') {
                    result = {
                        title: "VVIP 프라이빗 존",
                        desc: "외부 시선을 완벽 차단하고, 그 안에서 모든 파티와 휴식을 프라이빗하게 즐기고 싶으시군요.",
                        modelName: "SECRET GARDEN",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>미러 글라스 (안에선 보이고 밖에선 안 보임)</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>최고급 오디오 및 영상 시스템 연동</li>",
                        iconClass: "fa-solid fa-user-secret text-black",
                        personaIcon: "fa-solid fa-mask text-slate-800"
                    };
                } else if (purpose === '자랑') {
                    result = {
                        title: "존경받는 리더의 품격",
                        desc: "단순히 비싼 것을 넘어, 당신의 지위와 명예에 걸맞은 철학이 담긴 공간을 추구하시는군요.",
                        modelName: "THE MASTERPIECE (Bespoke)",
                        features: "<li><i class='fa-solid fa-check text-blue-500 mr-2'></i>장인의 손길이 느껴지는 비스포크 모델</li><li><i class='fa-solid fa-check text-blue-500 mr-2'></i>VIP 전담팀의 설계 및 관리 서비스</li>",
                        iconClass: "fa-solid fa-hand-holding-dollar text-yellow-600",
                        personaIcon: "fa-solid fa-chess-king text-yellow-500" // Updated to chess-king as requested for Chairman vibe
                    };
                }
            }

            return result;
        }

        // --- Form Submission & Email Sending ---
        function submitForm() {
            const name = document.getElementById('user_name').value;
            const phone = document.getElementById('user_phone').value;
            const privacy = document.getElementById('privacy').checked;

            if (!name || !phone || !privacy) {
                alert("성함, 연락처 입력 및 개인정보 동의는 필수입니다.");
                return;
            }

            answers.name = name;
            answers.phone = phone;
            answers.email = document.getElementById('user_email').value;
            answers.message = document.getElementById('user_message').value;

            document.getElementById('step-contact').classList.add('hidden');
            document.getElementById('footer-nav').classList.add('hidden');
            document.getElementById('loading-screen').classList.remove('hidden');
            document.getElementById('loading-screen').style.display = 'flex';

            const recommendation = getRecommendation();
            const scopeString = answers.scope.join(', ');

            const templateParams = {
                to_name: "관리자님",
                from_name: answers.name,
                phone: answers.phone,
                email: answers.email,
                message: answers.message,
                region: answers.region,
                district: answers.district,
                customer_type: answers.customerType,
                budget: answers.budget,
                environment: answers.environment,
                purpose: answers.purpose,
                size: answers.size,
                scope: scopeString,
                recommended_model: recommendation.modelName,
                persona: recommendation.title 
            };

            // Mock Send
            setTimeout(() => {
                console.log("Mock Email Sent:", templateParams);
                showResult(recommendation, scopeString);
            }, 2000);
        }

        function showResult(data, scopeString) {
            document.getElementById('loading-screen').classList.add('hidden');
            document.getElementById('loading-screen').style.display = 'none'; 
            currentStep = 10;
            
            // 1. Set Persona Data
            document.getElementById('persona-title').innerText = data.title;
            document.getElementById('persona-desc').innerText = data.desc;
            document.getElementById('persona-icon').className = `text-4xl ${data.personaIcon.replace('text-', 'text-yellow-400')}`; // Force yellow for contrast on dark card
            
            // 2. Set Model Data
            document.getElementById('result-model-name').innerText = data.modelName;
            document.getElementById('result-features').innerHTML = data.features;
            document.getElementById('result-icon').className = `text-7xl ${data.iconClass}`;
            
            // 3. Set Summary Data
            document.getElementById('summary-address').innerText = `${answers.region} ${answers.district}`;
            document.getElementById('summary-environment').innerText = answers.environment;
            document.getElementById('summary-budget').innerText = answers.budget;
            document.getElementById('summary-purpose').innerText = answers.purpose;
            document.getElementById('summary-size').innerText = answers.size;
            document.getElementById('summary-scope').innerText = scopeString;

            updateUI();
        }

        // Run
        init();

    </script>
</body>
</html>
